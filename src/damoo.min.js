/*! Damoo v2.2.0 | Copyright (c) 2015-2017 James Liu | Released under the MIT license */
;(a=>{function b(p,q){var u=e.dom.createElement('canvas'),v=u.getContext('2d');return v.font=q,u.width=v.measureText(p.text).width,u.height=1.5*q.size,v.font=q,v.textAlign='start',v.textBaseline='top',p.shadow&&(v.shadowOffsetX=1,v.shadowOffsetY=1,v.shadowColor='#fff',v.shadowColor=p.shadow.color),v.fillStyle='#fff',v.fillStyle=p.color,v.fillText(p.text,0,0),u}function c(){this.canvas.clear();for(var p=0;p<this.thread.pool.length;p++){var q=this.thread.get(p),u=q.offset.x,v=q.offset.y;this.canvas.draw(q,u,v),q.offset.x-=q.speed,u<=-q.canvas.width&&this.thread.remove(p)}j=g(function(){c.call(this)}.bind(this))}class e{constructor(p,q,u,v){this.canvas=new k(p,q,u,v),this.thread=new o(u)}show(){return this.canvas.parent.appendChild(this.canvas.layer),this}hide(){return this.canvas.parent.removeChild(this.canvas.layer),this}emit(p){'string'==typeof p&&(p={text:p});var q=b(p,this.canvas.font);return this.thread.push({canvas:q,fixed:p.fixed,index:this.thread.index,speed:0.6*Math.pow(q.width,1/3),offset:{x:this.canvas.width,y:this.canvas.font.size*this.thread.index}}),this}clear(){return this.thread.empty(),this}play(){return void 0===this.state&&this.clear().show(),this.state||(c.call(this),this.state=1),this}pause(){return void 0===this.state?this:(h(j),this.state=0,this)}resume(){return this.play()}}var g=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||a.msRequestAnimationFrame||a.oRequestAnimationFrame||function(p){return setTimeout(p,17)},h=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.msCancelAnimationFrame||a.oCancelAnimationFrame||function(p){clearTimeout(p)},j;class k{constructor(p,q,u,v){this.parent=1==p.nodeType?p:e.dom.getElementById(p),this.id=q,this.rows=u,this.width=this.parent.offsetWidth,this.height=this.parent.offsetHeight,12>this.height/this.rows&&(this.rows=this.height/12),this.font=new l(this.height/this.rows,v),this.layer=e.dom.createElement('canvas'),this.context=this.layer.getContext('2d'),this.layer.id=this.id,this.layer.width=this.width,this.layer.height=this.height,this.layer.style.display='block',this.layer.style.backgroundColor='transparent',this.parent.style.position?(this.layer.style.position='fixed',this.layer.style.left=this.parent.offsetLeft,this.layer.style.top=this.parent.offsetTop):(this.parent.style.position='relative',this.layer.style.position='absolute',this.layer.style.left=0,this.layer.style.top=0),this.layer.style.zIndex=999}clear(){this.context.clearRect(0,0,this.width,this.height)}draw(p,q,u){p.fixed&&(q=(this.width-p.canvas.width)/2),this.context.drawImage(p.canvas,q,u)}}class l{constructor(p,q){this.size=p,this.family=q||'sans-serif'}toString(){return this.size+'px '+this.family}}class o{constructor(p){this.index=0,this.rows=p,this.pool=[]}push(p){this.index++,this.index>=this.rows&&(this.index=0),this.pool.push(p)}get(p){return this.pool[p]}remove(p){var q=this.get(p).index;this.index>q&&(this.index=q),this.pool.splice(p,1)}empty(){this.index=0,this.pool=[]}}e.version='v2.2.0',e.dom=a.document,a.Damoo=e})(window);